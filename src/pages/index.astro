---
import Layout from "../layouts/Layout.astro";

// components
import { Icon } from "astro-icon";
import Background from "../components/content/Background.astro";
import Button from "../components/buttons/Button.astro";
import Container from "../components/Container.astro";
import Gallery from "../components/images/Gallery.astro";
import Section from "../components/Section.astro";
import Picture from "../components/images/Picture.astro";
import Pill from "../components/buttons/Pill.astro";
import Testimonial from "../components/Testimonial.astro";

// config
import { Business } from "../config";

// content
import { getCollection } from "astro:content";
const allTestimonials = await getCollection("testimonials");
const allBuilds = await getCollection("builds", ({ data }) => {
    return data.homepageFeatured;
});
const allBrands = await getCollection("brands", ({ data }) => {
    return data.featured == true;
});

// images
import { getBuildImage } from "../functions/Image.js";

// images
const headers = [
    {
        src: "shop/2023-02-23/shop-shoot_01.jpg",
        alt: "Ford Super Duty in Dripping Springs, TX",
    },
    {
        src: "shop/2022-12-05/shop-shoot_15.jpg",
        alt: "Truck outfitting in Austin, TX",
    },
    {
        src: "builds/298562/13.jpg",
        alt: "Highly modified Dodge RAM Power Wagon",
    },
    {
        src: "shop/2022-12-05/shop-shoot_06.jpg",
        alt: "Wheels and tires ready for installation",
    },
    {
        src: "builds/266375/02.jpg",
        alt: "Baja Designs lighting installed on a Ford Bronco",
    },
];
---

<Layout>
    <div class="bg-white relative">
        <Picture src="shop/2022-03-09/shop-shoot_01.jpg" alt="Fox shocks during install" class="absolute object-cover w-full h-full" alt={headers[3].alt} />

        <Section>
            <Container classes="relative z-10">
                <div class="bg-white max-w-3xl space-y-8 py-10 px-14 rounded-sm">
                    <h1>
                        {Business.nameLong} partners with the best.
                    </h1>
                    <p class="text-xl leading-8">
                        We've built partnerships with the best brands, nobody carries more Carli parts or knows the performance suspension options for your vehicle better than {Business.nameLong}.
                    </p>

                    <div class="flex flex-col gap-4 sm:flex-row sm:justify-center lg:justify-start items-center gap-x-6">
                        <Button icon="hero/WrenchScrewdriverFill" theme="secondary" href="/contact">Build Your Dream Truck</Button>
                        <Button icon="hero/ArrowRightCircleFill" href="/builds">See Our Builds</Button>
                    </div>
                </div>
            </Container>
        </Section>
    </div>

    <Background>
        <Section>
            <Container>
                <!-- brand logos -->
                <div class="mx-auto grid grid-cols-4 gap-6 md:gap-12">
                    {
                        allBrands
                            .map((b) => (
                                <div class="bg-stone-50 p-6 flex justify-center rounded-sm shadow-sm">
                                    <Icon name={`brands/${b.data.logo}`} alt={b.data.title} class="h-16 w-1/2 object-contain text-stone-900 place-self-center" />
                                </div>
                            ))
                            .slice(0, 12)
                    }
                </div>
            </Container>

            <Container>
                <!-- header images -->
                <div class="grid grid-cols-12 grid-rows-2 gap-10 h-[1000px]">
                    <div class="col-span-6 row-span-2">
                        <Picture src={headers[0].src} class="object-cover w-full h-full rounded-sm shadow-lg" alt={headers[0].alt} />
                    </div>
                    <div class="col-span-3 row-span-1">
                        <Picture src={headers[2].src} class="object-cover w-full h-full rounded-sm shadow-lg" alt={headers[2].alt} />
                    </div>
                    <div class="col-span-3 row-span-1">
                        <Picture src={headers[3].src} class="object-cover w-full h-full rounded-sm shadow-lg" alt={headers[3].alt} />
                    </div>
                    <div class="row-start-2 col-start-7 col-span-6">
                        <Picture src={headers[4].src} class="object-cover w-full h-full rounded-sm shadow-lg" alt={headers[3].alt} />
                    </div>
                </div>
            </Container>

            <!--
            <Container>
                <div class="grid grid-cols-1 items-start md:grid-cols-2 bg-white shadow rounded">
                    <div class="hidden md:block md:relative h-full w-full">
                        <Picture src="team/jamey/jamey.jpg" alt="Jamey Whitlock of THOR Off-Road" class="md:absolute h-full w-full object-cover md:object-[60%,10%] lg:object-[50%,30%] shadow rounded-l" />
                    </div>

                    <div class="py-8 md:py-60 px-12 rounded-r">
                        <div class="text-base leading-7 text-stone-700">
                            <h2 class="lg:max-w-lg">
                                The {Business.nameLong} Difference.
                            </h2>
                            <div class="text-lg leading-8 text-stone-700">
                                <p class="mt-8 text-lg sm:text-xl leading-8 sm:leading-9">
                                    {Business.nameShort} is the premiere truck and off-road vehicle outfitter in Texas with the unique automotive knowledge, technical expertise, and deep customer insights to consistently deliver the truck or adventure vehicle of our customers' dreams. Come experience
                                    your own purpose-built vehicle.
                                </p>
                                <p class="mt-8 text-stone-700">
                                    {Business.nameShort} is passionate about creating purpose-built vehicles for our customers, but we also thrive on building strong personal relationships that are based on competence and trust. We are experts in all things off-road and love to inspire and help our customers
                                    to build the truck or adventure vehicle that they have always wanted. We aren't satisfied until we hear our customers say,
                                    <em>“Wow, I can't believe that's my truck!”</em>
                                </p>
                                <div class="mt-16 flex flex-col gap-4">
                                    <Picture src="team/jamey/jamey-headshot.jpg" alt="Jamey Whitlock of THOR Off-Road" class="md:hidden rounded-full w-16 h-auto border border-stone-600" />

                                    <div class="flex flex-col gap-2">
                                        <p class="font-cursive font-medium text-4xl">Jamey Whitlock</p>
                                        <p class="text-stone-500 font-medium">
                                            Owner, {Business.nameLong}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </Container>
            -->

            <Container classes="space-y-16">
                <h2 class="mx-auto max-w-xl">We're building our customer's dream vehicles.</h2>

                <div class="grid grid-cols-2 lg:grid-cols-3 gap-[1px] bg-stone-300 rounded-sm">
                    {allTestimonials.map((t) => <Testimonial content={t.data} />).slice(0, 9)}
                </div>
            </Container>

            <Container>
                <Gallery classes="flex flex-col gap-12">
                    <div class="grid grid-cols-12 grid-rows-2 gap-12 h-[1000px]">
                        <Picture src={getBuildImage(108058, 3)} class="w-full h-full object-cover rounded-sm shadow-lg col-span-6 row-span-2" sizes="1000px" />
                        <Picture src={getBuildImage(276780, 6)} class="w-full h-full object-cover rounded-sm shadow-lg col-span-3 row-span-1" sizes="1000px" />
                        <Picture src={getBuildImage(695527, 7)} class="w-full h-full object-cover rounded-sm shadow-lg col-span-3 row-span-1" sizes="1000px" />
                        <Picture src={getBuildImage(791924, 7)} class="w-full h-full object-cover rounded-sm shadow-lg col-span-6 col-start-7" sizes="1000px" />
                    </div>
                    <div class="grid grid-cols-12 grid-rows-2 gap-12 h-[1000px]">
                        <Picture src={getBuildImage(328593, 8)} class="w-full h-full object-cover rounded-sm shadow-lg col-span-3" sizes="1000px" />
                        <Picture src={getBuildImage(405642, 5)} class="w-full h-full object-cover rounded-sm shadow-lg col-span-3" sizes="1000px" />
                        <Picture src={getBuildImage(965777, 5)} class="w-full h-full object-cover rounded-sm shadow-lg col-span-6 row-span-2" sizes="1000px" />
                        <Picture src={getBuildImage(405642, 2)} class="w-full h-full object-cover rounded-sm shadow-lg col-span-6 row-start-2" sizes="1000px" />
                    </div>
                </Gallery>
            </Container>
        </Section>
    </Background>
</Layout>
