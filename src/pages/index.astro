---
import Layout from "@/layouts/Layout";

// imports
import { getBuildImage } from "@/functions/Image";
import { Icon } from "astro-icon";

import Container from "@/components/Container";
import Gallery from "@/components/images/Gallery";
import Picture from "@/components/images/Picture";
import Section from "@/components/Section";
import Testimonial from "@/components/content/testimonials/Testimonial";

// config
import { Business } from "@/config";

// content
import { getCollection } from "astro:content";
const allTestimonials = await getCollection("testimonials");
allTestimonials.slice(0, 1);

const allBrands = await getCollection("brands", ({ data }) => {
    return data.featured == true;
});
---

<Layout>
    <Picture src="builds/662677/02.jpg" buildId={662677} loading="eager" class="w-full h-[65vh] object-cover" />

    <div class="-mt-48">
        <Container>
            <div class="grid grid-cols-2 gap-8">
                <div class="bg-black text-white p-8 space-y-8">
                    <h1>The Best Off-Road Truck Outfitter in Texas!</h1>
                    <p>THOR is the premiere truck and off-road vehicle outfitter in Texas with the unique automotive knowledge, technical expertise, and deep customer insights to consistently deliver the truck or adventure vehicle of our customers' dreams.</p>
                    <p>
                        THOR is passionate about creating purpose-built vehicles for our customers, but we also thrive on building strong personal relationships that are based on competence and trust. We are experts in all things off-road and love to inspire and help our customers to build the truck
                        or adventure vehicle that they have always wanted. We aren't satisfied until we hear our customers say: <span class="italic font-semibold">"Wow, I can't believe that's my truck!"</span>
                    </p>

                    <div class="flex flex-col gap-4 sm:flex-row">
                        <a href="/contact" class="button button-secondary">
                            <div class="button-icon">
                                <Icon name="hero/WrenchScrewdriverFill" class="h-2/5 w-auto" />
                            </div>
                            <div class="button-text">Build Your Truck</div>
                        </a>

                        <a href="/builds" class="button button-primary">
                            <div class="button-icon">
                                <Icon name="hero/ArrowRightCircleFill" class="h-2/5 w-auto" />
                            </div>
                            <div class="button-text">See Our Builds</div>
                        </a>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-8">
                    <Testimonial content={allTestimonials} />
                    <Testimonial content={allTestimonials} />

                    <div class="col-span-2">
                        <Testimonial content={allTestimonials} />
                    </div>

                    <Testimonial content={allTestimonials} />
                    <Testimonial content={allTestimonials} />
                </div>
            </div>

            <Section>
                <Container classes="space-y-8">
                    <div class="space-y-16">
                        <h2 class="lg:text-center">{Business.nameLong} partners<br />with the best brands.</h2>

                        <!-- brand logos -->
                        <div class="mx-auto grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6 md:gap-8">
                            {
                                allBrands
                                    .map((b) => (
                                        <div class="bg-stone-100 p-6 flex justify-center rounded">
                                            <Icon name={`brands/${b.data.logo}`} alt={b.data.title} class="h-8 lg:h-16 w-full lg:w-1/2 object-contain text-stone-900 place-self-center" />
                                        </div>
                                    ))
                                    .slice(0, 12)
                            }
                        </div>
                    </div>

                    <Gallery>
                        <div class="space-y-8">
                            <div class="grid grid-cols-12 grid-rows-1 md:grid-rows-2 md:h-[1000px] gap-6 md:gap-8">
                                <Picture src="shop/2023-02-23/shop-shoot_01.jpg" alt="Modified Ford Super Duty in Dripping Springs, TX" class="object-cover w-full h-full col-span-12 md:col-span-6 md:row-span-2 object-bottom rounded" sizes="(min-width: 768px) 50vw, 100vw" />
                                <Picture src={getBuildImage(298562, 13)} buildId={298562} class="object-cover w-full h-full col-span-12 md:col-span-3 md:row-span-1 rounded" sizes="(min-width: 768px) 25vw, 100vw" />
                                <Picture src={getBuildImage(405642, 5)} buildId={405642} class="object-cover w-full h-full col-span-12 md:col-span-3 md:row-span-1 rounded" sizes="(min-width: 768px) 25vw, 100vw" />
                                <Picture src={getBuildImage(266375, 2)} buildId={266375} class="object-cover w-full h-full col-span-12 md:row-start-2 md:col-start-7 md:col-span-6 rounded" sizes="(min-width: 768px) 50vw, 100vw" />
                            </div>

                            <div class="grid grid-cols-12 grid-rows-1 md:grid-rows-2 md:h-[1000px] gap-6 md:gap-8">
                                <Picture src={getBuildImage(108058, 3)} buildId={108058} class="object-cover w-full h-full col-span-12 md:col-span-6 md:row-span-2 rounded" sizes="(min-width: 768px) 50vw, 100vw" />
                                <Picture src={getBuildImage(276780, 6)} buildId={276780} class="object-cover w-full h-full col-span-12 md:col-span-3 md:row-span-1 rounded" sizes="(min-width: 768px) 25vw, 100vw" />
                                <Picture src={getBuildImage(453172, 2)} buildId={453172} class="object-cover w-full h-full col-span-12 md:col-span-3 md:row-span-1 rounded" sizes="(min-width: 768px) 25vw, 100vw" />
                                <Picture src={getBuildImage(791924, 7)} buildId={791924} class="object-cover w-full h-full col-span-12 md:row-start-2 md:col-start-7 md:col-span-6 rounded" sizes="(min-width: 768px) 50vw, 100vw" />
                            </div>
                        </div>
                    </Gallery>
                </Container>
            </Section>

            <Section>
                <Container>
                    <div class="space-y-16">
                        <h2 class="lg:text-center">We're building our <br /> customer's dream vehicles.</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8">{allTestimonials.map((t) => <Testimonial content={t.data} />).slice(0, 6)}</div>
                    </div>
                </Container>
            </Section>
        </Container>
    </div>
</Layout>
