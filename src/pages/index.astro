---
import Layout from "@/layouts/Layout";

import { getBuildImage } from "@/functions/Image";
import { getBuildDescription } from "@/functions/Content";
import { getCollection } from "astro:content";

import BuildAlt from "@/components/builds/snippets/BuildAlt";
import Container from "@/components/Container";
import Gallery from "@/components/images/Gallery";
import Icon from "@/components/Icon";
import Link from "@/components/Link";
import Part from "@/components/content/snippets/Part";
import Picture from "@/components/images/Picture";
import Testimonial from "@/components/content/testimonials/Testimonial";

// content
const allBrands = await getCollection("brands", ({ data }) => {
	return data.featured == true;
});
const allParts = await getCollection("parts");
const allTestimonials = await getCollection("testimonials", ({ data }) => {
	return data.featured.homepage == true;
});

const galleryImages = [
	{ id: "298562-2021-ram-2500", image: 5 },
	{ id: "405642-2022-ram-2500", image: 2 },
	{ id: "266375-2022-ford-bronco", image: 3 },
	{ id: "108058-2022-gmc-sierra-2500-hd", image: 6 },
	{ id: "276780-2019-ford-f-250", image: 2 },
	{ id: "453172-2020-ford-f-250", image: 7 },
	{ id: "791924-2016-toyota-tacoma", image: 7 },
	{ id: "404814-2023-ford-f-250", image: 2 },
];
---

<Layout>
	<div class="relative flex justify-end items-end min-h-[700px]">
		<Picture src="builds/296799-2024-gmc-sierra-2500-hd/02.jpg" loading="eager" class:list={["w-full h-full object-cover absolute"]} />
		<div class="absolute w-full h-full bg-gradient-to-b from-transparent via-black/20 to-black/70"></div>

		<Container classes="w-full pb-12">
			<h1 class="text-right relative text-balance font-alt text-7xl text-white uppercase font-medium">We're <strong>the Best</strong> Off-Road<br /> Truck Outfitter in Texas!</h1>
		</Container>
	</div>

	<div class="bg-[#004D72] section">
		<Container>
			<div class="grid grid-cols-4 gap-16">
				<BuildAlt build="235752-2022-jeep-wrangler" />
				<BuildAlt build="435826-2024-ford-f-250" />
				<BuildAlt build="632051-2022-ford-f-450" />
				<BuildAlt build="424381-2019-toyota-tacoma" />
			</div>
			<!-- <div class="flex">
				<div>
					<p class="font-alt">
						THOR is the premiere truck and off-road vehicle outfitter in Texas with the unique automotive knowledge, technical expertise, and deep customer insights to consistently deliver the truck or adventure vehicle of our customers'
						dreams.
					</p>
					<p>
						THOR is passionate about creating purpose-built vehicles for our customers, but we also thrive on building strong personal relationships that are based on competence and trust. We are experts in all things off-road and love to
						inspire and help our customers to build the truck or adventure vehicle that they have always wanted. We aren't satisfied until we hear our customers say: <span class="italic font-semibold"
							>"Wow, I can't believe that's my truck!"</span
						>
					</p>
				</div>
			</div> -->
		</Container>
	</div>

	<div class="bg-[#E1243B] text-white py-16">
		<Container>
			<div class="grid grid-cols-3 lg:grid-cols-6 justify-between gap-4">
				{allBrands.map((b) => <Icon icon={`brands/${b.data.logo}`} alt={b.data.title} class="h-12 w-7/12 place-self-center" />).slice(0, 6)}
			</div>
		</Container>
	</div>
	<div class="bg-[#B11D2F] text-white py-5">
		<Container>
			<div class="flex justify-between items-center">
				<div class="text-xl uppercase font-bold tracking-wider">Selling & Installing the Industries Best Brands</div>
				<div class="text-xl uppercase font-light tracking-wider">See More +</div>
			</div>
		</Container>
	</div>

	<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev/svgjs" viewBox="0 0 700 700" width="700" height="700"><defs><filter id="nnnoise-filter" x="-20%" y="-20%" width="140%" height="140%" filterUnits="objectBoundingBox" primitiveUnits="userSpaceOnUse" color-interpolation-filters="linearRGB">
		<feTurbulence type="fractalNoise" baseFrequency="0.102" numOctaves="4" seed="15" stitchTiles="stitch" x="0%" y="0%" width="100%" height="100%" result="turbulence"></feTurbulence>
		<feSpecularLighting surfaceScale="15" specularConstant="0.75" specularExponent="20" lighting-color="#6b00ff" x="0%" y="0%" width="100%" height="100%" in="turbulence" result="specularLighting">
				<feDistantLight azimuth="3" elevation="100"></feDistantLight>
		  </feSpecularLighting>
	  <feColorMatrix type="saturate" values="0" x="0%" y="0%" width="100%" height="100%" in="specularLighting" result="colormatrix"></feColorMatrix>
	</filter></defs><rect width="700" height="700" fill="transparent"></rect><rect width="700" height="700" fill="#44403C" filter="url(#nnnoise-filter)"></rect></svg>

	<div>
		<Container padding={true}>
			<div class="grid grid-cols-2 sm:gap-4">
				<!-- black content area -->
				<div class="box-spacing bg-black col-span-2 lg:col-span-1 text-white space-y-8">
					<!-- cta buttons -->
					<div class="flex flex-col gap-4 sm:flex-row lg:flex-col xl:flex-row">
						<Link href="/contact" icon="hero/WrenchScrewdriverFill" style="button-primary" fullWidth={true}> Build Your Truck </Link>

						<Link href="/builds" icon="hero/ArrowRightCircleFill" style="button-ghost" fullWidth={true}> See Our Builds </Link>
					</div>
				</div>

				<!-- testimonials -->
				<div class="grid col-span-2 lg:col-span-1 grid-cols-1 sm:grid-cols-2 sm:gap-4 divide-y divide-neutral-300 sm:divide-y-0">
					<div class="bg-white px-4 py-6 sm:p-6">
						<Testimonial content={allTestimonials[2]} lines="line-clamp-5" />
					</div>
					<div class="bg-white px-4 py-6 sm:p-6">
						<Testimonial content={allTestimonials[1]} lines="line-clamp-5" />
					</div>

					<div class="sm:col-span-2 bg-white px-4 py-6 sm:p-6">
						<Testimonial content={allTestimonials[0]} />
					</div>

					<div class="bg-white px-4 py-6 sm:p-6">
						<Testimonial content={allTestimonials[3]} lines="line-clamp-5" />
					</div>
					<div class="bg-white px-4 py-6 sm:p-6">
						<Testimonial content={allTestimonials[4]} lines="line-clamp-5" />
					</div>
				</div>
			</div>

			<div class="section grid grid-cols-3 lg:grid-cols-4 justify-between gap-8">
				{allBrands.map((b) => <Icon icon={`brands/${b.data.logo}`} alt={b.data.title} class="h-8 w-1/2 text-stone-900 place-self-center" />).slice(0, 12)}
			</div>
		</Container>
	</div>

	<div class="section bg-neutral-50">
		<Container>
			<div class="grid md:grid-cols-2 gap-10">
				<div class="flex flex-col justify-between gap-y-6">
					<div class="space-y-8">
						<h2>
							We Sell and Install the Best<br /> Off-Road Parts
						</h2>
						<p>
							THOR is the premiere truck and off-road vehicle outfitter in Texas with the unique automotive knowledge, technical expertise, and deep customer insights to consistently deliver the truck or adventure vehicle of our
							customers' dreams.
						</p>
					</div>

					<div>
						<Link href="/contact" style="button-ghost" inverse={true}> Build Your Vehicle </Link>
					</div>
				</div>

				<div class="grid grid-cols-2 gap-8">
					{allParts.map((p) => <Part part={p} />)}
				</div>
			</div>
		</Container>
	</div>

	<Gallery>
		<div class="grid grid-cols-12 grid-rows-2">
			{galleryImages.map((g) => <Picture src={getBuildImage(g.id, g.image)} alt={getBuildDescription(g.id)} class="object-cover w-full h-full col-span-6 md:col-span-3 sm:h-[200px] md:h-[350px]" sizes="(min-width: 640px) 25vw, 100vw" />)}
		</div>
	</Gallery>
</Layout>
