---
import Layout from "@/layouts/Layout";

import { getBuildImage } from "@/functions/Image";
import { getBuildDescription } from "@/functions/Content";
import { getCollection } from "astro:content";

import Container from "@/components/Container";
import Make from "@/components/vehicles/Make";
import Map from "@/components/backgrounds/Map";
import Picture from "@/components/images/Picture";

export async function getStaticPaths() {
	const parts = await getCollection("parts");

	return parts.map((part) => ({
		params: {
			id: part.id,
		},
		props: { part },
	}));
}

// content
const recentBuilds = (await getCollection("builds")).sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf()).slice(0, 8);
const allMakes = await getCollection("makes", ({ data }) => {
	return data.draft !== true;
});
const process = [
	{
		title: "We Know the Brands",
		description: "We love everything automotive and have decades of experience working on the top vehicle brands and platforms.",
	},
	{
		title: "We Know the Parts",
		description: "We only work with top manufacturers and have done the research and testing required to perfectly match parts for our off-road vehicle builds.",
	},
	{
		title: "What Are You Looking For?",
		description: "Our entire mission is to create purpose-built vehicles and we take the time to know you and the goals you have for your vehicle.",
	},
	{
		title: "Let's Build It!",
		description: "We match great design with high quality parts and professional installation to create the off-road or adventure vehicle of your dreams.",
	},
];
const headlineImages = [
	{ src: getBuildImage("185376-2023-toyota-tundra", 5), alt: await getBuildDescription("185376-2023-toyota-tundra") },
	{ src: getBuildImage("692114-2023-ram-2500", 2), alt: await getBuildDescription("692114-2023-ram-2500") },
];
const vehicleFill = {
	data: {
		title: "We Do It All!",
		description: {
			short: "We don't only work on trucks. If you've got a vehicle you're interested in modifying, why not give us a call or e-mail and see what we can do for you?",
		},
		logo: {
			name: "hero/Envelope",
		},
	},
};
---

<Layout title="We're the Top Truck Outfitter and Carli Dealer in Texas">
	<div class="section-small space-y-24 bg-chathams-blue-600">
		<Container classes="space-y-8">
			<div class="space-y-8 text-white">
				<h1 class="text-balance uppercase text-center lg:text-left lg:max-w-3xl">Texas' Top <strong>Truck Outfitter</strong></h1>
				<p class="text-base lg:text-xl text-balance md:!leading-relaxed lg:max-w-3xl text-center lg:text-left mx-auto md:max-w-2xl lg:mx-0">
					THOR is the premiere truck and off-road vehicle outfitter in Texas with the unique automotive knowledge, technical expertise, and deep customer insights to consistently deliver the truck or adventure vehicle of our customers'
					dreams.
				</p>
			</div>
		</Container>
	</div>

	<div class="grid grid-cols-1 md:grid-cols-4 md:grid-rows-2 gap-0 gallery md:h-[40vh]">
		<Picture src="shop/2023-02-23/shop-shoot_01.jpg" alt="Ford F-250 Super Duty in Dripping Springs, TX" class="md:col-span-2 w-full h-full object-cover object-[100%,75%] md:row-span-2" />
		{headlineImages.map((i) => <Picture src={i.src} alt={i.alt} class="md:col-span-2 w-full h-full object-cover md:row-span-1" />)}
	</div>

	<div class="section bg-torch-red-600 text-white">
		<Container classes="space-y-12 w-3/4 mx-auto">
			<h2 class="uppercase">Our <strong>Process</strong></h2>

			<div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
				{
					process.map((f, i) => (
						<div class="space-y-2 relative">
							<div class="absolute text-shiraz-600 text-[8em] uppercase font-alt font-black -top-8 -left-12">{i + 1}</div>
							<div class="text-xl sm:text-2xl md:text-3xl font-bold uppercase font-alt z-10 relative">{f.title}</div>
							<div set:html={f.description} class="text-base text-balance leading-relaxed z-10 relative" />
						</div>
					))
				}
			</div>
		</Container>
	</div>

	<Map classes="bg-stone-700 section" theme="light" opacity={0.03}>
		<Container>
			<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-16 mx-auto sm:w-3/4 md:w-full lg:w-3/4 xl:w-full">
				{allMakes.map((m) => <Make make={m} />)}
				<Make make={vehicleFill} url="/contact" />
			</div>
			<Container />
		</Container>
	</Map></Layout
>
