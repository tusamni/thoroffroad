---
import Layout from "@/layouts/Layout";

import { getBuildImage } from "@/functions/Image";
import { getBuildDescription } from "@/functions/Content";

import Container from "@/components/Container";
import Icon from "@/components/Icon";
import Map from "@/components/backgrounds/Map";
import PartAlt from "@/components/parts/PartAlt";
import Picture from "@/components/images/Picture";

// content
import { getCollection } from "astro:content";
const allParts = await getCollection("parts");
const allBrands = await getCollection("brands");

const process = [
	{
		title: "The Top Brands",
		description: "We partner with the world's most trusted parts manufacturers in the industry to create quality builds that our customers can depend on.",
	},
	{
		title: "Test, Test, Test",
		description: "We don't just install parts, we put them to the test to ensure that they perform exactly the way we designed to deliver the ultimate off-road experience.",
	},
	{
		title: "Targeted Performance",
		description: "We help our customers find the right balance of style, performance, and budget to get the most out of their off-road vehicle build.",
	},
];

const headlineImages = [
	{ src: getBuildImage("223455-2007-toyota-land-cruiser", 17), alt: await getBuildDescription("223455-2007-toyota-land-cruiser") },
	{ src: getBuildImage("235752-2022-jeep-wrangler", 6), alt: await getBuildDescription("235752-2022-jeep-wrangler") },
	{ src: getBuildImage("296799-2024-gmc-sierra-2500-hd", 9), alt: await getBuildDescription("296799-2024-gmc-sierra-2500-hd") },
	{ src: getBuildImage("296799-2024-gmc-sierra-2500-hd", 6), alt: await getBuildDescription("296799-2024-gmc-sierra-2500-hd") },
	{ src: getBuildImage("435826-2024-ford-f-250", 8), alt: await getBuildDescription("435826-2024-ford-f-250") },
	{ src: getBuildImage("335071-2015-ford-f-250", 13), alt: await getBuildDescription("335071-2015-ford-f-250") },
];
---

<Layout title="We're the Top Rated Carli Dealer and Installer in Texas">
	<div class="section-small space-y-24 bg-chathams-blue-600">
		<Container classes="space-y-8">
			<div class="space-y-8 text-white">
				<h1 class="text-balance uppercase text-center lg:text-left lg:max-w-3xl">Off-Road <strong>Parts and Installation</strong></h1>
				<p class="text-base lg:text-xl text-balance md:!leading-relaxed lg:max-w-3xl text-center lg:text-left mx-auto md:max-w-2xl lg:mx-0">
					THOR is the premiere truck and off-road vehicle outfitter in Texas with the unique automotive knowledge, technical expertise, and deep customer insights to consistently deliver the truck or adventure vehicle of our customers'
					dreams.
				</p>

				<div class="flex flex-col items-center sm:flex-row gap-4 justify-center lg:justify-start">
					<a href="/contact" class="font-semibold hover:underline">Contact Us</a>
					<div class="hidden sm:block">&middot;</div>
					<a href="/builds" class="hover:underline">See Our Builds &gt;</a>
				</div>
			</div>
		</Container>
	</div>

	<div class="gallery">
		<Picture src="shop/2022-03-09/shop-shoot_01.jpg" alt="FOX Shocks waiting to be installed" class="w-full h-[30vh] object-cover object-[50%,65%]" />
		<div class="grid grid-cols-2 lg:grid-cols-6 gap-0">
			{headlineImages.map((image) => <Picture src={image.src} alt={image.alt} class="w-full h-[15em] lg:h-[20em] object-cover" sizes="(min-width: 1024px) 20vw, 50vw" />)}
		</div>
	</div>

	<div class="section bg-torch-red-600 text-white">
		<Container classes="space-y-12">
			<h2 class="uppercase">Our <strong>Process</strong></h2>

			<div class="grid grid-cols-1 lg:grid-cols-3 justify-between gap-12 w-3/4 lg:w-auto mx-auto">
				{
					process.map((f, i) => (
						<div class="space-y-2 relative">
							<div class="absolute text-shiraz-600 text-[8em] uppercase font-alt font-black -top-8 -left-12">{i + 1}</div>
							<div class="text-xl sm:text-2xl md:text-3xl font-bold uppercase font-alt z-10 relative">{f.title}</div>
							<div set:html={f.description} class="text-base text-balance leading-relaxed z-10 relative" />
						</div>
					))
				}
			</div>
		</Container>
	</div>

	<div class="section bg-rock-50" x-data="{ expanded: false }">
		<Container classes="space-y-12">
			<div class="flex flex-col md:flex-row justify-between items-center">
				<h2 class="uppercase">Our <strong>Brands</strong></h2>
				<h6 class="uppercase text-balance font-semibold text-center text-lg lg:text-xl"><strong>Selling & Installing</strong> the Best!</h6>
			</div>

			<div class="grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-8 gap-0.5 rounded justify-between" :class="!expanded && '[mask-image:_linear-gradient(to_bottom,black_50%,transparent_100%)]'" x-show="expanded" x-collapse.min.400px>
				{
					allBrands.map((b) => (
						<div class="p-6 sm:p-10 text-stone-900 bg-rock-100/30">
							<Icon icon={`brands/${b.data.logo}`} alt={b.data.title} class="max-h-12 w-full object-contain" />
						</div>
					))
				}
			</div>

			<div class="flex justify-center">
				<div @click="expanded =! expanded" x-text="expanded ? `Hide 'Em!` : 'See More Brands'" class="font-semibold text-lg border p-4 rounded cursor-pointer"></div>
			</div>
		</Container>
	</div>

	<Map classes="bg-stone-700 section" theme="light" opacity={0.03}>
		<Container>
			<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-16 mx-auto sm:w-3/4 md:w-full lg:w-3/4 xl:w-full">
				{allParts.map((p) => <PartAlt part={p} />)}
			</div>
		</Container>
	</Map>
</Layout>

<script is:inline src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
