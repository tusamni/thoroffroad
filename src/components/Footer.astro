---
// components
import { Icon } from "astro-icon";
import Background from "@/components/content/Background";
import BuildSnippet from "@/components/builds/BuildSnippet";
import Container from "@/components/Container";
import Cta from "@/components/Cta";
import Picture from "./images/Picture.astro";
import Section from "@/components/Section";

// config
import { Social, Business } from "../config.js";

// content
import { getCollection } from "astro:content";
const featuredBuilds = ["340718", "453172", "266375", "695527", "108058", "100052"];
const allParts = await getCollection("parts");
const allMakes = await getCollection("makes");
const allBuilds = (
    await getCollection("builds", ({ data }) => {
        return featuredBuilds.includes(data.id.toString());
    })
).sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Background>
    <Section>
        <Container>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-16">
                <div class="py-16">
                    <Cta />
                </div>

                <iframe
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3448.4307137009937!2d-98.0231541877444!3d30.196252074742556!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x865b46992512c29d%3A0x8d5bae8937d3b284!2sTHOR%20Off%20Road!5e0!3m2!1sen!2sus!4v1694229765516!5m2!1sen!2sus"
                    class="w-full h-full"
                    allowfullscreen=""
                    loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
        </Container>
    </Section>

    <div class="bg-stone-900">
        <Section>
            <Container>
                <footer>
                    <div class="flex lg:flex-row flex-col lg:justify-between gap-24 mb-24">
                        <div class="space-y-12 max-w-lg">
                            <Icon name="logo" class="h-14 w-auto text-white" />

                            <p class="text-md leading-7 text-stone-50">Located in Dripping Springs, Texas, {Business.nameLong} are experts in designing and building off-road vehicles that deliver the exact performance and style that our customers dream about.</p>

                            <!-- contact -->
                            <div class="space-y-4 text-stone-50">
                                <div class="flex gap-x-4 items-start">
                                    <Icon name="hero/Phone" class="w-4 h-auto" />
                                    <a href={`tel:${Business.phone}`} class="text-base">{Business.phone}</a>
                                </div>
                                <div class="flex gap-x-4 items-start">
                                    <Icon name="hero/Envelope" class="w-4 h-auto" />
                                    <a href={`mailto:${Business.email}`} class="text-base">{Business.email}</a>
                                </div>
                                <div class="flex gap-x-4 items-start">
                                    <Icon name="hero/Map" class="w-4 h-auto" />
                                    <a href={Business.mapUrl} class="text-base">{Business.address.street01} {Business.address.street02}<br />{Business.address.city}, {Business.address.state}</a>
                                </div>
                            </div>

                            <!-- social -->
                            <div class="flex space-x-6">
                                {
                                    Social.map((s) => (
                                        <a href={s.url} target="_blank" title={`THOR Off-Road ${s.title}`}>
                                            <Icon name={s.icon} class="w-4 text-white" />
                                        </a>
                                    ))
                                }
                            </div>
                        </div>

                        <!-- navigation -->
                        <div class="min-w-fit">
                            <div class="grid grid-cols-3 gap-12">
                                <div class="space-y-6">
                                    <h6 class="text-stone-50">Vehicles</h6>
                                    <hr class="w-1/2 border-stone-500" />
                                    <ul role="list" class="space-y-2">
                                        {
                                            allMakes.map((m) => (
                                                <li>
                                                    <a href={`/vehicles/${m.slug}`} title={m.data.title} class="text-sm leading-6 text-stone-200">
                                                        {m.data.title}
                                                    </a>
                                                </li>
                                            ))
                                        }
                                    </ul>
                                </div>

                                <div class="space-y-6">
                                    <h6 class="text-stone-50">Parts</h6>
                                    <hr class="w-1/2 border-gray-500" />
                                    <ul role="list" class="space-y-2">
                                        {
                                            allParts.map((p) => (
                                                <li>
                                                    <a href={`/parts/${p.slug}`} title={p.data.title} class="text-sm leading-6 text-stone-200">
                                                        {p.data.title}
                                                    </a>
                                                </li>
                                            ))
                                        }
                                    </ul>
                                </div>

                                <div class="space-y-6">
                                    <h6 class="text-stone-50">Other</h6>
                                    <hr class="w-1/2 border-stone-500" />
                                    <ul role="list" class="space-y-2">
                                        <li>
                                            <a href="#" class="text-sm leading-6 text-stone-200">Sitemap</a>
                                        </li>
                                        <li>
                                            <a href="/privacy-policy" class="text-sm leading-6 text-stone-200">Privacy Policy</a>
                                        </li>
                                        <li>
                                            <a href="/terms-of-use" class="text-sm leading-6 text-stone-200">Terms of Use</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid gap-y-2 md:grid-cols-2 md:justify-between">
                        <p class="text-sm leading-5 text-stone-300">&copy; {Business.nameLong}. All rights reserved.</p>
                        <a href={Business.mapUrl} class="text-sm leading-5 text-stone-300 md:justify-self-end">{Business.address.street01} {Business.address.street02}, {Business.address.city}, {Business.address.state}</a>
                    </div>
                </footer>
            </Container>
        </Section>
    </div>
</Background>
